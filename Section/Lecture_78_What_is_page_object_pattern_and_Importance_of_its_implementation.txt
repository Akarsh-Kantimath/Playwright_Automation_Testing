Page Object Pattern for UI automation test
-------------------------------------------
Page Object - For every page we gone a create a JS file, all the locators and logic methods belongs to that page will go to that JS file. On run-time we will call those JS files to implement the code.

At parent level, add a folder pageobjects
inside it we will create the .js files - LoginPage.js

We will create a class of same name as a file name
class LoginPage {
	
	constructor(){
		//If you want to declare any locators, it's better to do it inside the constructor.
//Whenever somebody creates a object of the class, locators will be intialised automatically




	}



}
===============================================================
17_E2E_EcommerceTestPO.spec.js

const {test, expect} = require('@playwright/test');
const {LoginPage} = require('../pageobjects/LoginPage');

test('E2E test', async({browser})=>{
    const username = 'tester_akarsh@gmail.com';
    const password = 'Abcd1234#';
    const context = await browser.newContext();
    const page = await context.newPage();
    const products = page.locator('.card');

    const loginPage = new LoginPage(page);
    loginPage.goTo();
    loginPage.validLogin(username, password);





    const productName = 'ADIDAS ORIGINAL'; //ZARA COAT 3,ADIDAS ORIGINAL,iphone 13 pro


    await products.last().waitFor();
    const productsTotalCount = await products.count();
    //console.log(productsTotalCount);
    for (let i = 0; i < productsTotalCount; i++){
        // if (i === 3 ){

        //     break;
        // }
        // console.log (await products.nth(i).locator('b').textContent());

        if (await products.nth(i).locator('b').textContent() === productName ) {
            await products.nth(i).locator("text= Add To Cart").click();
            break;
        }
    }
    await page.locator('[routerlink="/dashboard/cart"]').click();
    await page.locator('.items.even.ng-star-inserted').first().waitFor();
    const productBooleanValue = await page.locator('h3').last().textContent() === productName
    expect(productBooleanValue).toBeTruthy();
    await page.locator('text=Checkout').click();
    await page.locator('.field.small input').first().fill('123');
    await page.locator('.field.small input').last().fill('rahulshettyacademy');
    await page.getByRole('textbox').nth(2).fill('tester');
    await page.locator('button').locator('text=Apply Coupon').click();
    await expect(page.locator('p').last()).toHaveText('* Coupon Applied');
    await page.locator('[placeholder="Select Country"]').pressSequentially('ro', {delay:150});
    await page.locator('.ta-results.list-group.ng-star-inserted').waitFor();
    const countryName = page.locator('section button');
    const totalNumberOfCountries = await countryName.count();
    // const Names = await countryName.allTextContents();
    // console.log(Names);
    console.log(countryName.nth(7).textContent());
    for(let i = 0; i < totalNumberOfCountries; i++){

        if(await countryName.nth(i).textContent() === ' Romania'){
            await countryName.nth(i).click();
            break;
        }
    }
    await expect (page.locator('[style*="lightgray"]')).toHaveText(username);
    await page.locator('.action__submit').click();
    await expect (page.locator('h1')).toHaveText(' Thankyou for the order. ');
    const orderId = await page.locator('[style*="14px"] .ng-star-inserted').textContent();
    console.log(orderId);

    await page.locator('ul [routerlink="/dashboard/myorders"]').click();
    await page.locator('tbody tr th').last().waitFor();
    const totalRows = await page.locator('tbody tr th').count();
    console.log(totalRows);
    for(let i = 0; i < totalRows; i++){
        console.log(await page.locator('tbody tr th').nth(i).textContent());
        if(orderId.includes(await page.locator('tbody tr th').nth(i).textContent())){
            await page.locator('tbody tr button').nth(i).first().click();
            break;
        }
    }
    const OrderIdFromOrderSummary = await page.locator('.col-text').textContent();
    expect(orderId.includes(OrderIdFromOrderSummary)).toBeTruthy();
    await page.pause();
});


===================================================
LoginPage.js

class LoginPage {

    constructor(page) {
        //these 3 locators are auto intialised when the object of the class LoginPage is created in 17_E2E_EcommerceTestPO.spec.js file.
        //const loginPage = new LoginPage(page);
        //On creating the object, on run-time it envoke the constructor and these 3 locators will get intialised.
        this.page = page;
        this.signInbutton = page.locator('#login');
        this.userName = page.locator('#userEmail');
        this.password = page.locator('#userPassword');


    }

    async goTo(){
        await this.page.goto('https://rahulshettyacademy.com/client/#/auth/login');

    }

    async validLogin(username, password) { //we are putting async for await
        //through this method we receive the variables username, password
        await this.userName.fill(username);
        await this.password.fill(password);
        await this.signInbutton.click();
    }


}
module.exports = {LoginPage};
